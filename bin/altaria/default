#!/bin/zsh
source ${0:a:h}/xorg.zsh

case $MONITOR_CONFIGURATION in
	home )
		;;
	unknown )
		echo 'unknown state; using default configuration to prevent monitor issues'
		xrandr --output $(xrandr | grep ' connected' | awk '{print $1;}') --primary
		scwrypts desktop i3 set background -- $(scwrypts -n get theme).jpg
		$DOTWRYN/bin/polybar
		scwrypts desktop play sound        -- login
		return 0
		;;
esac

USE_SMOL=false
xrandr -q | grep $XRANDR_OUTPUT__smol | grep -v 'disconnected' && {
	xrandr -q | grep $XRANDR_OUTPUT__smol | grep -qv primary && {
		USE_SMOL=true
	}
}

XRANDR_ARGS=()
case $USE_SMOL in
	true )
		XRANDR_ARGS+=(
			${XRANDR_ARGS__smol__1080p[@]}       --pos 0x0 --primary
		)
		;;
	false )
		XRANDR_ARGS+=(
			${XRANDR_ARGS__office__4k[@]}        --pos 0x0 --primary
			${XRANDR_ARGS__livingroom__4k[@]}    --pos 0x0
		)
		;;
esac

XRANDR_SET \
	--screen-blank disable \
	${XRANDR_ARGS[@]} \
	;
